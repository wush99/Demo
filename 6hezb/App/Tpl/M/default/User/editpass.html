<include file="Pub:header" /> 
<div class="main">
<div class="box7_title"><a href="javascript:history.back()" target="_blank"><img src="/style/mobile/images/table_but.png"/></a>安全中心-修改登录密码</div>
<form  action="" method="post" name="setpayForm" id="setpayForm">
<div class="login">
 <div class="name"><label>登陆密码：</label><input type="password" name='oldpass' id="oldpass" class="wbk" /><font color=red>*</font></div>
 <div class="name"><label>&nbsp;&nbsp;&nbsp;新密码：</label><input type="password" name="password" id="password" class="wbk" /><font color=red>*</font></div>
 <div class="name"><label>确认密码：</label><input type="password" name="password2" id="password2" class="wbk"  /><font color=red>*</font>
  </div>     
 <div class="button"><input type="button" class="butt" value="确&nbsp;&nbsp; 定" /></div>
</div> 
</form>
</div>
<script language="javascript">
$(function(){
    $(".butt").click(function(){
        var oldpass = $.trim($("#oldpass").val());
        var password = $.trim($("#password").val());
        var password2 = $.trim($("#password2").val());
        if(!oldpass){
            Apprise('<font color=red>请输入登陆密码！</font>');
            return false;
        }
        if(!password){
            Apprise('<font color=red>请输入新的密码！</font>'); 
            return false;
        }
        if(!password2){
            Apprise('<font color=red>请输入确认密码！</font>'); 
            return false;
        }
        if(password2 != password){
            Apprise('<font color=red>两次密码不相同！</font>'); 
            return false;
        }
        if(password.length<6){
            Apprise('<font color=red>密码必须大于等于6位字符</font>'); 
            return false;
        }
        $.ajax({
           type: "POST",
           url: "",
           data: 'oldpass='+oldpass+'&password='+password+'&password2='+password2,
           success: function(msg){
               if(msg=='TRUE'){
                  Apprise("恭喜密码设置完成");
                  $("#apprise-btn-confirm").click(function(){
                     window.location.href="{:U('M/user/index')}";
                  })
               }else{
                  Apprise('<font color=red>'+msg+'</font>');
               }
           },
           error:function(err){
               Apprise("<font color=red>提交发生错误！请重试</font>");
           }
       });
    })
})
</script>
﻿<include file="Pub:footer" />
